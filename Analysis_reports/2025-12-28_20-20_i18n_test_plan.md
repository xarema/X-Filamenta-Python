# âœ… Tests du systÃ¨me i18n amÃ©liorÃ©

**Date** : 2025-12-28T20:20:00+01:00  
**Serveur** : http://127.0.0.1:5000  
**Statut** : ğŸŸ¢ Serveur dÃ©marrÃ© avec succÃ¨s

---

## ğŸ§ª Plan de tests

### Test 1 : DÃ©tection automatique de la langue du navigateur

**Objectif** : VÃ©rifier que la langue est dÃ©tectÃ©e automatiquement depuis le header `Accept-Language`

**Ã‰tapes** :

1. Configurer le navigateur en **franÃ§ais** (ParamÃ¨tres â†’ Langues)
2. Ouvrir `http://127.0.0.1:5000/install/`
3. âœ… **RÃ©sultat attendu** : Wizard en franÃ§ais

---

### Test 2 : Changement de langue via `/lang/<code>`

**Objectif** : VÃ©rifier que le changement manuel de langue fonctionne

**Ã‰tapes** :

1. Aller sur `http://127.0.0.1:5000/lang/en?start=1`
2. âœ… **RÃ©sultat attendu** : Wizard en anglais
3. Aller sur `http://127.0.0.1:5000/lang/fr?start=1`
4. âœ… **RÃ©sultat attendu** : Wizard en franÃ§ais
5. Aller sur `http://127.0.0.1:5000/lang/es?start=1`
6. âœ… **RÃ©sultat attendu** : Wizard en espagnol

---

### Test 3 : Toutes les Ã©tapes du wizard

**Objectif** : VÃ©rifier qu'aucune variable brute ne s'affiche

**Ã‰tapes** :

1. Commencer le wizard en anglais
2. Parcourir toutes les Ã©tapes :
   - âœ… Langue
   - âœ… Bienvenue
   - âœ… PrÃ©requis
   - âœ… Base de donnÃ©es
   - âœ… Administrateur
   - âœ… RÃ©sumÃ©
   - âœ… TerminÃ©
3. âœ… **RÃ©sultat attendu** : Aucun texte comme `wizard.title` ou `wizard.db.test_success`

---

### Test 4 : Boutons de traduction

**Objectif** : VÃ©rifier que les boutons problÃ©matiques sont maintenant traduits

**VÃ©rifications spÃ©cifiques** :

- âœ… `{{ t('wizard.skip_backup') }}` â†’ "Continue without backup" (EN) / "Continuer sans backup" (FR) / "Continuar sin respaldo" (ES)
- âœ… `{{ t('wizard.restore_backup') }}` â†’ "Restore a backup" (EN) / "Restaurer un backup" (FR) / "Restaurar un respaldo" (ES)
- âœ… Boutons dans le fil d'Ariane
- âœ… Messages d'erreur dans les formulaires

---

### Test 5 : Langues disponibles

**Objectif** : VÃ©rifier que le systÃ¨me dÃ©tecte automatiquement les langues

**Test dans Python** :

```python
from backend.src.utils.i18n import get_available_languages

languages = get_available_languages()
print(languages)
# RÃ©sultat attendu : {'en': 'English', 'fr': 'FranÃ§ais', 'es': 'EspaÃ±ol'}
```

---

## ğŸ“‹ Checklist de vÃ©rification

### Avant les tests

- [x] Serveur dÃ©marrÃ© sans erreur
- [x] Port 5000 accessible
- [x] Logs affichent "Serving on http://127.0.0.1:5000"

### Pendant les tests

- [ ] Navigateur en franÃ§ais â†’ Wizard en franÃ§ais
- [ ] Navigateur en anglais â†’ Wizard en anglais
- [ ] Changement de langue via `/lang/fr` fonctionne
- [ ] Changement de langue via `/lang/en` fonctionne
- [ ] Changement de langue via `/lang/es` fonctionne
- [ ] Aucune variable brute visible (ex: `wizard.title`)
- [ ] Tous les boutons sont traduits
- [ ] Messages d'erreur traduits
- [ ] Fil d'Ariane traduit

### Tests spÃ©cifiques wizard

- [ ] Page langue : texte bilingue correct
- [ ] Page bienvenue : traduction correcte
- [ ] Page prÃ©requis : traduction correcte
- [ ] Page base de donnÃ©es :
  - [ ] Label "URI de connexion" traduit
  - [ ] Bouton "Tester la connexion" traduit
  - [ ] Message succÃ¨s/erreur traduit
  - [ ] Exemples traduits
- [ ] Page admin :
  - [ ] Labels traduits
  - [ ] Messages d'aide traduits
- [ ] Page rÃ©sumÃ© : tous les labels traduits
- [ ] Page terminÃ© : messages traduits

---

## ğŸ› Erreurs Ã  surveiller

### Erreurs courantes

1. **Variable brute affichÃ©e** (ex: `wizard.title`)
   - **Cause** : ClÃ© manquante dans le fichier de langue
   - **Solution** : Ajouter la clÃ© manquante dans `en.json`, `fr.json`, `es.json`

2. **Langue forcÃ©e Ã  franÃ§ais**
   - **Cause** : Session pas rÃ©initialisÃ©e
   - **Solution** : Vider les cookies ou aller sur `/lang/en?start=1`

3. **Erreur 500 dans le wizard**
   - **Cause** : Fonction `t()` non disponible dans le contexte
   - **Solution** : VÃ©rifier que `install.py` ligne 128-133 passe bien `t` au contexte

4. **Langue du navigateur non dÃ©tectÃ©e**
   - **Cause** : Header `Accept-Language` vide
   - **Solution** : Configurer la langue dans les paramÃ¨tres du navigateur

---

## ğŸ“Š RÃ©sultats attendus

| Test | Statut | Notes |
|------|--------|-------|
| Serveur dÃ©marre | âœ… OK | http://127.0.0.1:5000 |
| DÃ©tection navigateur FR | â³ Ã€ tester | â€” |
| DÃ©tection navigateur EN | â³ Ã€ tester | â€” |
| Changement langue `/lang/fr` | â³ Ã€ tester | â€” |
| Changement langue `/lang/en` | â³ Ã€ tester | â€” |
| Changement langue `/lang/es` | â³ Ã€ tester | â€” |
| Wizard complet EN | â³ Ã€ tester | â€” |
| Wizard complet FR | â³ Ã€ tester | â€” |
| Wizard complet ES | â³ Ã€ tester | â€” |
| Aucune variable brute | â³ Ã€ tester | â€” |
| Boutons traduits | â³ Ã€ tester | â€” |

---

## ğŸ¯ Instructions pour l'utilisateur

### Pour tester maintenant

1. **Ouvrir le navigateur** sur `http://127.0.0.1:5000/install/`
2. **Changer la langue** du navigateur dans les paramÃ¨tres :
   - Firefox : `ParamÃ¨tres â†’ Langue â†’ Ajouter une langue`
   - Chrome : `ParamÃ¨tres â†’ Langues â†’ Ordre de prÃ©fÃ©rence`
3. **RafraÃ®chir la page** (Ctrl+F5)
4. **VÃ©rifier** que le wizard s'affiche dans la langue du navigateur

### Pour tester une langue spÃ©cifique

1. **FranÃ§ais** : `http://127.0.0.1:5000/lang/fr?start=1`
2. **Anglais** : `http://127.0.0.1:5000/lang/en?start=1`
3. **Espagnol** : `http://127.0.0.1:5000/lang/es?start=1`

### Pour rapporter un problÃ¨me

Si vous voyez une variable brute (ex: `wizard.title`), notez :

1. La page oÃ¹ Ã§a apparaÃ®t
2. La langue sÃ©lectionnÃ©e
3. Le texte exact affichÃ©
4. Capture d'Ã©cran dans `.SCREENSHOTS/`

---

## âœ… Validation finale

Une fois tous les tests rÃ©ussis :

- [ ] Aucune variable brute visible
- [ ] Toutes les langues fonctionnent (EN, FR, ES)
- [ ] DÃ©tection automatique du navigateur OK
- [ ] Changement de langue manuel OK
- [ ] Wizard complet fonctionnel dans les 3 langues

**Si tous les tests passent** â†’ Le systÃ¨me i18n est **100% opÃ©rationnel** âœ…

---

**Prochaine Ã©tape** : Ajouter d'autres langues selon les besoins (de, it, pt, ru, zh, ja, ar, etc.)

---

**Mainteneur** : AleGabMar  
**DerniÃ¨re mise Ã  jour** : 2025-12-28T20:20:00+01:00

